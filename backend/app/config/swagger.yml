openapi: 3.0.0
info:
  title: Social Media API
  version: 1.0.0
  description: |
    Instagram Clone Backend API built with Node.js, TypeScript, Express, MongoDB, and Redis.
    
    This API provides endpoints for:
    - User authentication and management
    - Posts, Stories, and Reels
    - Comments and Likes
    - Follow/Unfollow functionality
    - Real-time Chat
    - Notifications
    - Admin operations
  contact:
    name: API Support
    email: support@socialmedia.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:5004/api/v1
    description: Development server
  - url: https://api.socialmedia.com/api/v1
    description: Production server

tags:
  - name: Auth
    description: Authentication endpoints
  - name: Users
    description: User management endpoints
  - name: Posts
    description: Post management endpoints
  - name: Comments
    description: Comment endpoints
  - name: Likes
    description: Like endpoints
  - name: Follows
    description: Follow/Unfollow endpoints
  - name: Stories
    description: Story endpoints
  - name: Reels
    description: Reel endpoints
  - name: Chat
    description: Chat and messaging endpoints
  - name: Notifications
    description: Notification endpoints
  - name: Admin
    description: Admin operations

security:
  - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from login endpoint

  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439011"
        email:
          type: string
          format: email
          example: "user@example.com"
        username:
          type: string
          example: "johndoe"
        fullName:
          type: string
          example: "John Doe"
        bio:
          type: string
          example: "Software Developer"
        avatar:
          type: string
          format: uri
          example: "https://example.com/avatar.jpg"
        coverPhoto:
          type: string
          format: uri
          example: "https://example.com/cover.jpg"
        isEmailVerified:
          type: boolean
          example: true
        role:
          type: string
          enum: [user, admin, moderator]
          example: "user"
        followers:
          type: array
          items:
            type: string
        following:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Post:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439011"
        user:
          $ref: '#/components/schemas/User'
        caption:
          type: string
          example: "Beautiful sunset today! #sunset #nature"
        media:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [image, video]
              url:
                type: string
                format: uri
        location:
          type: string
          example: "New York, USA"
        tags:
          type: array
          items:
            type: string
          example: ["sunset", "nature"]
        likes:
          type: array
          items:
            type: string
        comments:
          type: array
          items:
            type: string
        shares:
          type: number
          example: 10
        isArchived:
          type: boolean
          example: false
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Comment:
      type: object
      properties:
        id:
          type: string
        user:
          $ref: '#/components/schemas/User'
        post:
          type: string
        content:
          type: string
          example: "Great post!"
        likes:
          type: array
          items:
            type: string
        replies:
          type: array
          items:
            type: string
        parentComment:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Story:
      type: object
      properties:
        id:
          type: string
        user:
          $ref: '#/components/schemas/User'
        media:
          type: object
          properties:
            type:
              type: string
              enum: [image, video]
            url:
              type: string
              format: uri
        caption:
          type: string
        views:
          type: array
          items:
            type: string
        expiresAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    Reel:
      type: object
      properties:
        id:
          type: string
        user:
          $ref: '#/components/schemas/User'
        video:
          type: object
          properties:
            url:
              type: string
              format: uri
            thumbnail:
              type: string
              format: uri
            duration:
              type: number
        caption:
          type: string
        audio:
          type: string
        likes:
          type: array
          items:
            type: string
        comments:
          type: array
          items:
            type: string
        views:
          type: number
          example: 1000
        shares:
          type: number
          example: 50
        isArchived:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Chat:
      type: object
      properties:
        id:
          type: string
        participants:
          type: array
          items:
            $ref: '#/components/schemas/User'
        lastMessage:
          type: string
        lastMessageAt:
          type: string
          format: date-time
        isGroup:
          type: boolean
        groupName:
          type: string
        groupAvatar:
          type: string
          format: uri
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Message:
      type: object
      properties:
        id:
          type: string
        chat:
          type: string
        sender:
          $ref: '#/components/schemas/User'
        content:
          type: string
        media:
          type: object
          properties:
            type:
              type: string
              enum: [image, video, audio, file]
            url:
              type: string
              format: uri
        isRead:
          type: boolean
        readBy:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Notification:
      type: object
      properties:
        id:
          type: string
        user:
          type: string
        type:
          type: string
          enum: [like, comment, follow, mention, message, post, story]
        title:
          type: string
        message:
          type: string
        relatedUser:
          $ref: '#/components/schemas/User'
        relatedPost:
          type: string
        relatedComment:
          type: string
        isRead:
          type: boolean
        createdAt:
          type: string
          format: date-time

    AuthResponse:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/User'
        tokens:
          type: object
          properties:
            access:
              type: object
              properties:
                token:
                  type: string
                expires:
                  type: string
                  format: date-time
            refresh:
              type: object
              properties:
                token:
                  type: string
                expires:
                  type: string
                  format: date-time

    Error:
      type: object
      properties:
        status:
          type: string
          example: "error"
        statusCode:
          type: number
          example: 400
        message:
          type: string
          example: "Error message"
        error:
          type: boolean
          example: true

    PaginationMeta:
      type: object
      properties:
        page:
          type: number
          example: 1
        limit:
          type: number
          example: 10
        total:
          type: number
          example: 100
        totalPages:
          type: number
          example: 10
        hasNextPage:
          type: boolean
        hasPrevPage:
          type: boolean

    ApiResponse:
      type: object
      properties:
        status:
          type: string
          example: "success"
        statusCode:
          type: number
          example: 200
        message:
          type: string
        data:
          type: object
        meta:
          $ref: '#/components/schemas/PaginationMeta'

paths:
  /auth/register:
    post:
      tags:
        - Auth
      summary: Register a new user
      description: Create a new user account
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - username
                - fullName
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
                username:
                  type: string
                  minLength: 3
                  maxLength: 30
                fullName:
                  type: string
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags:
        - Auth
      summary: Login user
      description: Authenticate user and return JWT tokens
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/logout:
    post:
      tags:
        - Auth
      summary: Logout user
      description: Invalidate refresh token
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /auth/refresh-token:
    post:
      tags:
        - Auth
      summary: Refresh access token
      description: Get a new access token using refresh token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  access:
                    type: object
                    properties:
                      token:
                        type: string
                      expires:
                        type: string
                        format: date-time
        '401':
          description: Invalid refresh token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/forgot-password:
    post:
      tags:
        - Auth
      summary: Request password reset
      description: Send password reset email
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
      responses:
        '200':
          description: Password reset email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /auth/reset-password:
    post:
      tags:
        - Auth
      summary: Reset password
      description: Reset password using token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - token
                - password
              properties:
                token:
                  type: string
                password:
                  type: string
                  minLength: 8
      responses:
        '200':
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /auth/verify-email:
    get:
      tags:
        - Auth
      summary: Verify email
      description: Verify email address using token
      security: []
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /auth/resend-verification:
    post:
      tags:
        - Auth
      summary: Resend verification email
      description: Resend email verification link
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
      responses:
        '200':
          description: Verification email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /users:
    get:
      tags:
        - Users
      summary: Get all users
      description: Retrieve list of users with pagination
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
        - name: search
          in: query
          schema:
            type: string
          description: Search by username or fullName
      responses:
        '200':
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /users/me:
    get:
      tags:
        - Users
      summary: Get current user profile
      description: Get authenticated user's profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    patch:
      tags:
        - Users
      summary: Update current user profile
      description: Update authenticated user's profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fullName:
                  type: string
                bio:
                  type: string
                  maxLength: 150
                avatar:
                  type: string
                  format: uri
                coverPhoto:
                  type: string
                  format: uri
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    delete:
      tags:
        - Users
      summary: Deactivate account
      description: Deactivate current user's account
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Account deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /users/{userId}:
    get:
      tags:
        - Users
      summary: Get user by ID
      description: Retrieve user information by user ID
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/{userId}/posts:
    get:
      tags:
        - Users
      summary: Get user's posts
      description: Retrieve all posts by a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: User posts retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /users/{userId}/followers:
    get:
      tags:
        - Users
      summary: Get user's followers
      description: Retrieve list of users following a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Followers retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /users/{userId}/following:
    get:
      tags:
        - Users
      summary: Get users being followed
      description: Retrieve list of users that a specific user is following
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Following retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /posts:
    get:
      tags:
        - Posts
      summary: Get feed posts
      description: Retrieve posts for the user's feed
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Posts retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    post:
      tags:
        - Posts
      summary: Create a new post
      description: Create a new post with media
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - media
              properties:
                caption:
                  type: string
                  maxLength: 2200
                media:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    required:
                      - type
                      - url
                    properties:
                      type:
                        type: string
                        enum: [image, video]
                      url:
                        type: string
                        format: uri
                location:
                  type: string
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: Post created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /posts/{postId}:
    get:
      tags:
        - Posts
      summary: Get post by ID
      description: Retrieve a specific post by ID
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Post found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '404':
          description: Post not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    patch:
      tags:
        - Posts
      summary: Update post
      description: Update a post (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                caption:
                  type: string
                  maxLength: 2200
                location:
                  type: string
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Post updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Not authorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Posts
      summary: Delete post
      description: Delete a post (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Post deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Not authorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /posts/user/{userId}:
    get:
      tags:
        - Posts
      summary: Get user's posts
      description: Retrieve all posts by a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: User posts retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /comments:
    post:
      tags:
        - Comments
      summary: Create a comment
      description: Add a comment to a post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - post
                - content
              properties:
                post:
                  type: string
                content:
                  type: string
                  maxLength: 1000
                parentComment:
                  type: string
      responses:
        '201':
          description: Comment created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /comments/post/{postId}:
    get:
      tags:
        - Comments
      summary: Get comments for a post
      description: Retrieve all comments for a specific post
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Comments retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /comments/{commentId}:
    get:
      tags:
        - Comments
      summary: Get comment by ID
      description: Retrieve a specific comment
      security:
        - bearerAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comment retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    patch:
      tags:
        - Comments
      summary: Update comment
      description: Update a comment (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  maxLength: 1000
      responses:
        '200':
          description: Comment updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    delete:
      tags:
        - Comments
      summary: Delete comment
      description: Delete a comment (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comment deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /comments/{commentId}/replies:
    get:
      tags:
        - Comments
      summary: Get comment replies
      description: Retrieve replies to a specific comment
      security:
        - bearerAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Replies retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /likes:
    post:
      tags:
        - Likes
      summary: Toggle like
      description: Like or unlike a post, comment, story, or reel
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - targetType
                - targetId
              properties:
                targetType:
                  type: string
                  enum: [post, comment, story, reel]
                targetId:
                  type: string
      responses:
        '200':
          description: Like toggled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /likes/{targetType}/{targetId}:
    get:
      tags:
        - Likes
      summary: Get likes for a target
      description: Retrieve all likes for a post, comment, story, or reel
      security:
        - bearerAuth: []
      parameters:
        - name: targetType
          in: path
          required: true
          schema:
            type: string
            enum: [post, comment, story, reel]
        - name: targetId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Likes retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /likes/{targetType}/{targetId}/check:
    get:
      tags:
        - Likes
      summary: Check if user liked
      description: Check if current user has liked a target
      security:
        - bearerAuth: []
      parameters:
        - name: targetType
          in: path
          required: true
          schema:
            type: string
            enum: [post, comment, story, reel]
        - name: targetId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Like status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  statusCode:
                    type: number
                  data:
                    type: object
                    properties:
                      isLiked:
                        type: boolean

  /follows:
    post:
      tags:
        - Follows
      summary: Follow a user
      description: Follow another user
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - followingId
              properties:
                followingId:
                  type: string
      responses:
        '200':
          description: Successfully followed user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /follows/{userId}:
    delete:
      tags:
        - Follows
      summary: Unfollow a user
      description: Unfollow a user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successfully unfollowed user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /follows/{userId}/followers:
    get:
      tags:
        - Follows
      summary: Get user's followers
      description: Retrieve list of users following a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Followers retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /follows/{userId}/following:
    get:
      tags:
        - Follows
      summary: Get users being followed
      description: Retrieve list of users that a specific user is following
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Following retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /follows/{userId}/check:
    get:
      tags:
        - Follows
      summary: Check follow status
      description: Check if current user is following a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Follow status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  statusCode:
                    type: number
                  data:
                    type: object
                    properties:
                      isFollowing:
                        type: boolean

  /stories:
    get:
      tags:
        - Stories
      summary: Get active stories
      description: Retrieve all active stories
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Stories retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    post:
      tags:
        - Stories
      summary: Create a story
      description: Create a new story (expires in 24 hours)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - media
              properties:
                media:
                  type: object
                  required:
                    - type
                    - url
                  properties:
                    type:
                      type: string
                      enum: [image, video]
                    url:
                      type: string
                      format: uri
                caption:
                  type: string
                  maxLength: 200
      responses:
        '201':
          description: Story created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /stories/user/{userId}:
    get:
      tags:
        - Stories
      summary: Get user's stories
      description: Retrieve all stories by a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User stories retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /stories/{storyId}:
    get:
      tags:
        - Stories
      summary: Get story by ID
      description: Retrieve a specific story
      security:
        - bearerAuth: []
      parameters:
        - name: storyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Story retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    delete:
      tags:
        - Stories
      summary: Delete story
      description: Delete a story (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: storyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Story deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /stories/{storyId}/view:
    post:
      tags:
        - Stories
      summary: View story
      description: Mark a story as viewed
      security:
        - bearerAuth: []
      parameters:
        - name: storyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Story viewed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /reels:
    get:
      tags:
        - Reels
      summary: Get feed reels
      description: Retrieve reels for the user's feed
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Reels retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    post:
      tags:
        - Reels
      summary: Create a reel
      description: Create a new reel with video
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - video
              properties:
                video:
                  type: object
                  required:
                    - url
                  properties:
                    url:
                      type: string
                      format: uri
                    thumbnail:
                      type: string
                      format: uri
                    duration:
                      type: number
                caption:
                  type: string
                  maxLength: 2200
                audio:
                  type: string
      responses:
        '201':
          description: Reel created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /reels/{reelId}:
    get:
      tags:
        - Reels
      summary: Get reel by ID
      description: Retrieve a specific reel (increments view count)
      security:
        - bearerAuth: []
      parameters:
        - name: reelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reel retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    patch:
      tags:
        - Reels
      summary: Update reel
      description: Update a reel (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: reelId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                caption:
                  type: string
                  maxLength: 2200
                audio:
                  type: string
      responses:
        '200':
          description: Reel updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    delete:
      tags:
        - Reels
      summary: Delete reel
      description: Delete a reel (only by owner)
      security:
        - bearerAuth: []
      parameters:
        - name: reelId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reel deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /reels/user/{userId}:
    get:
      tags:
        - Reels
      summary: Get user's reels
      description: Retrieve all reels by a specific user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: User reels retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /chats:
    get:
      tags:
        - Chat
      summary: Get user's chats
      description: Retrieve all chats for the authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Chats retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    post:
      tags:
        - Chat
      summary: Create a chat
      description: Create a new chat or get existing chat
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - participants
              properties:
                participants:
                  type: array
                  items:
                    type: string
                isGroup:
                  type: boolean
                  default: false
                groupName:
                  type: string
                groupAvatar:
                  type: string
                  format: uri
      responses:
        '201':
          description: Chat created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /chats/{chatId}:
    get:
      tags:
        - Chat
      summary: Get chat by ID
      description: Retrieve a specific chat with participants
      security:
        - bearerAuth: []
      parameters:
        - name: chatId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Chat retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /chats/{chatId}/messages:
    get:
      tags:
        - Chat
      summary: Get chat messages
      description: Retrieve messages for a specific chat
      security:
        - bearerAuth: []
      parameters:
        - name: chatId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 50
      responses:
        '200':
          description: Messages retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    post:
      tags:
        - Chat
      summary: Send message
      description: Send a message in a chat
      security:
        - bearerAuth: []
      parameters:
        - name: chatId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  maxLength: 5000
                media:
                  type: object
                  properties:
                    type:
                      type: string
                      enum: [image, video, audio, file]
                    url:
                      type: string
                      format: uri
      responses:
        '201':
          description: Message sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /chats/{chatId}/read:
    post:
      tags:
        - Chat
      summary: Mark chat as read
      description: Mark all messages in a chat as read
      security:
        - bearerAuth: []
      parameters:
        - name: chatId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Chat marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /notifications:
    get:
      tags:
        - Notifications
      summary: Get notifications
      description: Retrieve all notifications for the authenticated user
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 20
      responses:
        '200':
          description: Notifications retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /notifications/unread-count:
    get:
      tags:
        - Notifications
      summary: Get unread notification count
      description: Get count of unread notifications
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Unread count retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  statusCode:
                    type: number
                  data:
                    type: object
                    properties:
                      count:
                        type: number

  /notifications/{notificationId}:
    get:
      tags:
        - Notifications
      summary: Get notification by ID
      description: Retrieve a specific notification
      security:
        - bearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Notification retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    patch:
      tags:
        - Notifications
      summary: Mark notification as read
      description: Mark a specific notification as read
      security:
        - bearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Notification marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
    delete:
      tags:
        - Notifications
      summary: Delete notification
      description: Delete a specific notification
      security:
        - bearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Notification deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /notifications/read-all:
    patch:
      tags:
        - Notifications
      summary: Mark all notifications as read
      description: Mark all notifications as read for the authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: All notifications marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'

  /admin:
    get:
      tags:
        - Admin
      summary: Get all admins
      description: Retrieve list of all admins (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: number
            default: 1
        - name: limit
          in: query
          schema:
            type: number
            default: 10
      responses:
        '200':
          description: Admins retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Admin
      summary: Create admin
      description: Create a new admin user (admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: string
                permissions:
                  type: array
                  items:
                    type: string
                isSuperAdmin:
                  type: boolean
                  default: false
      responses:
        '201':
          description: Admin created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /admin/{adminId}:
    get:
      tags:
        - Admin
      summary: Get admin by ID
      description: Retrieve a specific admin (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: adminId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Admin retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    patch:
      tags:
        - Admin
      summary: Update admin
      description: Update admin permissions (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: adminId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                permissions:
                  type: array
                  items:
                    type: string
                isSuperAdmin:
                  type: boolean
      responses:
        '200':
          description: Admin updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Admin
      summary: Delete admin
      description: Delete an admin (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: adminId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Admin deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '403':
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
